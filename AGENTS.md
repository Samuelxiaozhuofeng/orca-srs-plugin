# Repository Guidelines

## Project Structure & Module Organization
The plugin is a Vite + React + TypeScript project. Core entry point is `src/main.ts`. UI pieces live in `src/components/` and `src/panels/`, reusable logic in `src/hooks/` and `src/libs/`, and SRS domain logic in `src/srs/` (algorithms, storage, registry, settings). Styling is in `src/styles/`, translations in `src/translations/`, and tests in `src/test/` plus `src/**/*.test.ts(x)`. Build output goes to `dist/`; coverage reports are written to `coverage/`. Configuration files include `vite.config.ts`, `tsconfig*.json`, and `vitest.config.ts`.

## Build, Test, and Development Commands
- `npm install`: install dependencies (Node.js 18+ recommended).
- `npm run dev`: start the Vite dev server for local UI work.
- `npm run build`: run TypeScript checks and bundle for production.
- `npm run preview`: preview the production build locally.
- `npm run test`: run Vitest once in CI mode.

Note: `postbuild` copies `dist/` into `/Users/samdagreat/Documents/orca/plugins/orca-srs/dist`. Update that path if your local Orca plugin directory differs.

## Coding Style & Naming Conventions
Follow existing patterns in the file you are touching. The codebase is TypeScript-first, uses ESM imports, and commonly uses 2-space indentation and double-quoted strings. React components are `PascalCase` (e.g., `FlashcardHome.tsx`), hooks are `useX` (e.g., `useDeckStats.ts`), and tests use `*.test.ts` / `*.test.tsx`.

## Testing Guidelines
Tests run with Vitest and are discovered under `src/**/*.test.ts(x)`. Add tests for SRS logic changes under `src/srs/` and for UI behavior in component tests where practical. Coverage reports are generated by V8 and written to `coverage/`.

## Commit & Pull Request Guidelines
Commit history favors conventional prefixes like `feat:`, `refactor:`, and short imperative summaries; English or Chinese are both used. Keep commits focused and descriptive. PRs should include a clear summary, linked issues if any, and screenshots or short clips for UI changes. Mention test results or note if tests were not run.

## Security & Configuration Tips
Do not commit API keys or secrets. AI provider keys are configured through the Orca plugin settings UI, not source control.

## Documentation & Build Sync
Run `npm run build` after every change. Keep documentation in `模块文档/` aligned with the code: update existing docs when behavior changes, and add a new doc when a change introduces a new feature or workflow without coverage.

## Tooling Workflow (Required)
Add and follow this prompt when handling code changes:

```
你必须按以下顺序调用工具：
1) mcp__ace-tool__search_context：先在代码库中搜索相关实现
   - project_root_path 固定为 /Users/samdagreat/Documents/vibe coding/orca-srs-plugin
   - query 根据问题给出清晰的自然语言描述 + 关键词
2) mcp__sequential-thinking__sequentialthinking：用 3-5 步结构化思考，并逐步产出思路，直到 nextThoughtNeeded=false

输出时仅给出结论与行动建议，不要展示内部思考过程。
```
